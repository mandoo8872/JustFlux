# ğŸ—ï¸ JustFlux v2 ë¦¬íŒ©í† ë§ ì•„í‚¤í…ì²˜ ì„¤ê³„

## ğŸ“‹ ì•„í‚¤í…ì²˜ ê°œìš”

ì´ ë¬¸ì„œëŠ” JustFlux v2ì˜ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.

**í•µì‹¬ ì›ì¹™**: ë„ë©”ì¸ ì£¼ë„ ì„¤ê³„(DDD), ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP), ì˜ì¡´ì„± ì—­ì „ ì›ì¹™(DIP)

---

## ğŸ¯ ì•„í‚¤í…ì²˜ ëª©í‘œ

### **1. í™•ì¥ì„± (Scalability)**
- ìƒˆë¡œìš´ ì£¼ì„ íƒ€ì… ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ
- AI ì—”ì§„ ì—°ë™ ì‹œ í”ŒëŸ¬ê·¸ì¸ ë°©ì‹ìœ¼ë¡œ ì¶”ê°€
- ìƒˆë¡œìš´ ë‚´ë³´ë‚´ê¸° í˜•ì‹ ì‰½ê²Œ ì¶”ê°€

### **2. ìœ ì§€ë³´ìˆ˜ì„± (Maintainability)**
- íŒŒì¼ í¬ê¸° í‰ê·  200ì¤„ ì´í•˜
- ë³µì¡ë„ 80% ê°ì†Œ
- í…ŒìŠ¤íŠ¸ ìš©ì´ì„± 300% í–¥ìƒ

### **3. ì„±ëŠ¥ (Performance)**
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ìµœì í™”
- ë Œë”ë§ ì„±ëŠ¥ í–¥ìƒ
- ë²ˆë“¤ í¬ê¸° ìµœì í™”

---

## ğŸ—ï¸ ì „ì²´ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Presentation Layer                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Shell.tsx (ë¶„í•´ ì˜ˆì •)  â”‚  Header  â”‚  Sidebar  â”‚  MainContent â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        Domain Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Annotations  â”‚  Layers  â”‚  AI  â”‚  Input  â”‚  Output  â”‚  ... â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Application Layer                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Services  â”‚  Stores  â”‚  Events  â”‚  DI Container  â”‚  Hooks â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        Infrastructure Layer                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  PDF.js  â”‚  Canvas  â”‚  File I/O  â”‚  Network  â”‚  Storage  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ë””ë ‰í† ë¦¬ êµ¬ì¡°

### **ë„ë©”ì¸ë³„ ëª¨ë“ˆí™” (Domain-Driven Design)**

```
src/
â”œâ”€â”€ domains/                           # ë„ë©”ì¸ë³„ ëª¨ë“ˆí™”
â”‚   â”œâ”€â”€ annotations/                  # ì£¼ì„ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ services/                # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ AnnotationService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AnnotationRegistry.ts
â”‚   â”‚   â”‚   â””â”€â”€ AnnotationValidator.ts
â”‚   â”‚   â”œâ”€â”€ components/              # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ AnnotationManager.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AnnotationRenderer.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AnnotationEditor.tsx
â”‚   â”‚   â”œâ”€â”€ types/                   # íƒ€ì… ì •ì˜
â”‚   â”‚   â”‚   â””â”€â”€ AnnotationTypes.ts
â”‚   â”‚   â”œâ”€â”€ utils/                   # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”‚   â””â”€â”€ AnnotationUtils.ts
â”‚   â”‚   â””â”€â”€ index.ts                 # ì§„ì…ì 
â”‚   â”œâ”€â”€ layers/                      # ë ˆì´ì–´ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ LayerService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ BlendModeService.ts
â”‚   â”‚   â”‚   â””â”€â”€ FilterService.ts
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ LayerManager.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LayerPanel.tsx
â”‚   â”‚   â”‚   â””â”€â”€ LayerControls.tsx
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ ai/                          # AI ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ engines/
â”‚   â”‚   â”‚   â”œâ”€â”€ BaseAIEngine.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ OpenAIEngine.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ClaudeEngine.ts
â”‚   â”‚   â”‚   â””â”€â”€ GeminiEngine.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ OCRService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ AIService.ts
â”‚   â”‚   â”‚   â””â”€â”€ SuggestionService.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ input/                       # ì…ë ¥ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ FileUploadService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ ImageProcessor.ts
â”‚   â”‚   â”‚   â””â”€â”€ OCRProcessor.ts
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ output/                      # ì¶œë ¥ ì‹œìŠ¤í…œ
â”‚       â”œâ”€â”€ exporters/
â”‚       â”‚   â”œâ”€â”€ BaseExporter.ts
â”‚       â”‚   â”œâ”€â”€ PDFExporter.ts
â”‚       â”‚   â”œâ”€â”€ ImageExporter.ts
â”‚       â”‚   â”œâ”€â”€ EmailExporter.ts
â”‚       â”‚   â””â”€â”€ CloudExporter.ts
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ state/                           # ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ stores/                      # ê°œë³„ ìŠ¤í† ì–´
â”‚   â”‚   â”œâ”€â”€ DocumentStore.ts
â”‚   â”‚   â”œâ”€â”€ AnnotationStore.ts
â”‚   â”‚   â”œâ”€â”€ ViewStore.ts
â”‚   â”‚   â”œâ”€â”€ LayerStore.ts
â”‚   â”‚   â””â”€â”€ ExportStore.ts
â”‚   â”œâ”€â”€ services/                    # ìƒíƒœ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ StateSyncService.ts
â”‚   â”‚   â””â”€â”€ StatePersistenceService.ts
â”‚   â””â”€â”€ hooks/                       # ì»¤ìŠ¤í…€ í›…
â”‚       â”œâ”€â”€ useDocumentState.ts
â”‚       â”œâ”€â”€ useAnnotationState.ts
â”‚       â””â”€â”€ useViewState.ts
â”œâ”€â”€ core/                            # í•µì‹¬ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ events/                      # ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
â”‚   â”‚   â”œâ”€â”€ EventBus.ts
â”‚   â”‚   â””â”€â”€ EventTypes.ts
â”‚   â”œâ”€â”€ di/                          # ì˜ì¡´ì„± ì£¼ì…
â”‚   â”‚   â”œâ”€â”€ Container.ts
â”‚   â”‚   â””â”€â”€ ServiceTokens.ts
â”‚   â””â”€â”€ validation/                  # ê²€ì¦ ì‹œìŠ¤í…œ
â”‚       â”œâ”€â”€ Validator.ts
â”‚       â””â”€â”€ Schema.ts
â””â”€â”€ ui/                              # UI ì»´í¬ë„ŒíŠ¸
    â”œâ”€â”€ layout/                      # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
    â”‚   â”œâ”€â”€ Shell.tsx (ë¶„í•´ ì˜ˆì •)
    â”‚   â”œâ”€â”€ Header.tsx
    â”‚   â”œâ”€â”€ Sidebar.tsx
    â”‚   â””â”€â”€ MainContent.tsx
    â””â”€â”€ features/                    # ê¸°ëŠ¥ë³„ ì»´í¬ë„ŒíŠ¸
        â”œâ”€â”€ input/
        â”œâ”€â”€ edit/
        â””â”€â”€ output/
```

---

## ğŸ”§ í•µì‹¬ ì„¤ê³„ íŒ¨í„´

### **1. ë ˆì§€ìŠ¤íŠ¸ë¦¬ íŒ¨í„´ (Registry Pattern)**

```typescript
// ì£¼ì„ íƒ€ì… ë“±ë¡ ì‹œìŠ¤í…œ
class AnnotationRegistry {
  private renderers = new Map<string, AnnotationRenderer>();
  
  register(type: string, renderer: AnnotationRenderer): void {
    this.renderers.set(type, renderer);
  }
  
  getRenderer(type: string): AnnotationRenderer | null {
    return this.renderers.get(type) || null;
  }
}
```

**ì¥ì **: ìƒˆë¡œìš´ ì£¼ì„ íƒ€ì… ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ

### **2. íŒ©í† ë¦¬ íŒ¨í„´ (Factory Pattern)**

```typescript
// ì£¼ì„ ìƒì„± íŒ©í† ë¦¬
class AnnotationFactory {
  createAnnotation(type: string, props: any): Annotation | null {
    const renderer = annotationRegistry.getRenderer(type);
    if (!renderer) return null;
    
    const defaultProps = renderer.getDefaultProps();
    return { ...defaultProps, ...props };
  }
}
```

**ì¥ì **: ì£¼ì„ ìƒì„± ë¡œì§ ì¤‘ì•™í™”, ì¼ê´€ì„± ë³´ì¥

### **3. ì˜ì¡´ì„± ì£¼ì… (Dependency Injection)**

```typescript
// ì„œë¹„ìŠ¤ ì»¨í…Œì´ë„ˆ
class DIContainer {
  private services = new Map<ServiceToken, ServiceFactory>();
  
  register<T>(token: ServiceToken<T>, factory: ServiceFactory<T>): void {
    this.services.set(token, factory);
  }
  
  resolve<T>(token: ServiceToken<T>): T {
    const factory = this.services.get(token);
    return factory();
  }
}
```

**ì¥ì **: ì„œë¹„ìŠ¤ ê°„ ëŠìŠ¨í•œ ê²°í•©, í…ŒìŠ¤íŠ¸ ìš©ì´ì„±

### **4. ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ (Event-Driven Architecture)**

```typescript
// ì´ë²¤íŠ¸ ë²„ìŠ¤
class EventBus {
  private listeners = new Map<string, Set<EventCallback>>();
  
  on<T>(event: string, callback: EventCallback<T>): void {
    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
  }
  
  emit<T>(event: string, data?: T): void {
    // ì´ë²¤íŠ¸ ë°œìƒ
  }
}
```

**ì¥ì **: ì»´í¬ë„ŒíŠ¸ ê°„ ëŠìŠ¨í•œ ê²°í•©, í™•ì¥ì„±

---

## ğŸ”„ ë°ì´í„° íë¦„

### **1. ì£¼ì„ ìƒì„± íë¦„**

```
ì‚¬ìš©ì ì•¡ì…˜
  â†“
AnnotationManager (UI)
  â†“
AnnotationService (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)
  â†“
AnnotationRegistry (íƒ€ì… í™•ì¸)
  â†“
AnnotationFactory (ê°ì²´ ìƒì„±)
  â†“
AnnotationStore (ìƒíƒœ ì—…ë°ì´íŠ¸)
  â†“
EventBus (ì´ë²¤íŠ¸ ë°œìƒ)
  â†“
UI ì¬ë Œë”ë§
```

### **2. ìƒíƒœ ê´€ë¦¬ íë¦„**

```
ì‚¬ìš©ì ì•¡ì…˜
  â†“
Zustand ì•¡ì…˜
  â†“
Immer ì—…ë°ì´íŠ¸
  â†“
íˆìŠ¤í† ë¦¬ íŒ¨ì¹˜ (JSON Patch)
  â†“
ì´ë²¤íŠ¸ ë°œìƒ
  â†“
UI ì¬ë Œë”ë§
```

### **3. ì´ë²¤íŠ¸ íë¦„**

```
Annotation ìƒì„±
  â†“
EVENTS.ANNOTATION_CREATED ë°œìƒ
  â†“
ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ì´ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
  â†“
ê°ìì˜ ë¡œì§ ì‹¤í–‰
  â†“
UI ì—…ë°ì´íŠ¸
```

---

## ğŸ¯ í™•ì¥ì„± ì„¤ê³„

### **1. ìƒˆë¡œìš´ ì£¼ì„ íƒ€ì… ì¶”ê°€**

```typescript
// 1. ì£¼ì„ ì»´í¬ë„ŒíŠ¸ ìƒì„±
class NewAnnotationComponent extends React.Component {
  // êµ¬í˜„
}

// 2. ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ë“±ë¡
annotationRegistry.register('new-type', {
  render: (props) => <NewAnnotationComponent {...props} />,
  validate: (annotation) => annotation.type === 'new-type',
  getDefaultProps: () => ({ /* ê¸°ë³¸ê°’ */ })
});

// 3. ì™„ë£Œ! ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ
```

### **2. ìƒˆë¡œìš´ AI ì—”ì§„ ì¶”ê°€**

```typescript
// 1. AI ì—”ì§„ êµ¬í˜„
class NewAIEngine implements BaseAIEngine {
  async analyze(text: string): Promise<AnalysisResult> {
    // êµ¬í˜„
  }
}

// 2. DI ì»¨í…Œì´ë„ˆì— ë“±ë¡
container.register(TOKENS.NEW_AI_ENGINE, () => new NewAIEngine());

// 3. ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©
const aiService = container.resolve(TOKENS.AI_SERVICE);
aiService.addEngine('new-engine', container.resolve(TOKENS.NEW_AI_ENGINE));
```

### **3. ìƒˆë¡œìš´ ë‚´ë³´ë‚´ê¸° í˜•ì‹ ì¶”ê°€**

```typescript
// 1. ë‚´ë³´ë‚´ê¸° êµ¬í˜„
class NewFormatExporter implements BaseExporter {
  async export(data: ExportData): Promise<ExportResult> {
    // êµ¬í˜„
  }
}

// 2. íŒ©í† ë¦¬ì— ë“±ë¡
exportFactory.register('new-format', () => new NewFormatExporter());

// 3. ì™„ë£Œ! UIì—ì„œ ìë™ìœ¼ë¡œ ì‚¬ìš© ê°€ëŠ¥
```

---

## ğŸš€ ì„±ëŠ¥ ìµœì í™”

### **1. ë©”ëª¨ë¦¬ ìµœì í™”**

```typescript
// ì£¼ì„ ë Œë”ë§ ìµœì í™”
const AnnotationRenderer = React.memo(({ annotation, ...props }) => {
  // ë Œë”ë§ ë¡œì§
}, (prevProps, nextProps) => {
  // ë³€ê²½ëœ ê²½ìš°ì—ë§Œ ì¬ë Œë”ë§
  return prevProps.annotation.id === nextProps.annotation.id &&
         prevProps.annotation.bbox === nextProps.annotation.bbox;
});
```

### **2. ë²ˆë“¤ í¬ê¸° ìµœì í™”**

```typescript
// ì§€ì—° ë¡œë”©
const AnnotationManager = React.lazy(() => import('./AnnotationManager'));
const LayerManager = React.lazy(() => import('./LayerManager'));

// ì¡°ê±´ë¶€ ë¡œë”©
const AIPanel = React.lazy(() => 
  import('./AIPanel').then(module => ({ default: module.AIPanel }))
);
```

### **3. ë Œë”ë§ ì„±ëŠ¥**

```typescript
// ê°€ìƒí™” (ëŒ€ìš©ëŸ‰ ì£¼ì„ ëª©ë¡)
const VirtualizedAnnotationList = ({ annotations }) => {
  const [visibleRange, setVisibleRange] = useState({ start: 0, end: 10 });
  
  return (
    <div>
      {annotations.slice(visibleRange.start, visibleRange.end).map(annotation => (
        <AnnotationComponent key={annotation.id} annotation={annotation} />
      ))}
    </div>
  );
};
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### **1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸**

```typescript
// AnnotationService í…ŒìŠ¤íŠ¸
describe('AnnotationService', () => {
  it('should create annotation with valid type', () => {
    const service = new AnnotationService();
    const annotation = service.createAnnotation('text', { text: 'Hello' });
    expect(annotation).toBeDefined();
    expect(annotation.type).toBe('text');
  });
});
```

### **2. í†µí•© í…ŒìŠ¤íŠ¸**

```typescript
// AnnotationManager í†µí•© í…ŒìŠ¤íŠ¸
describe('AnnotationManager', () => {
  it('should render annotations correctly', () => {
    const annotations = [mockTextAnnotation, mockHighlightAnnotation];
    render(<AnnotationManager annotations={annotations} />);
    
    expect(screen.getByText('Hello')).toBeInTheDocument();
    expect(screen.getByTestId('highlight-1')).toBeInTheDocument();
  });
});
```

### **3. E2E í…ŒìŠ¤íŠ¸**

```typescript
// ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
describe('Annotation Workflow', () => {
  it('should create, edit, and delete annotation', async () => {
    // PDF ë¡œë“œ
    await user.uploadFile('test.pdf');
    
    // ì£¼ì„ ìƒì„±
    await user.clickTool('text');
    await user.clickOnCanvas({ x: 100, y: 100 });
    await user.type('Hello World');
    
    // ì£¼ì„ í¸ì§‘
    await user.selectAnnotation('text-1');
    await user.changeStyle({ color: 'red' });
    
    // ì£¼ì„ ì‚­ì œ
    await user.pressKey('Delete');
    
    expect(screen.queryByText('Hello World')).not.toBeInTheDocument();
  });
});
```

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹…

### **1. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**

```typescript
// ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
class PerformanceMonitor {
  static measureAnnotationRender(annotationId: string, renderTime: number) {
    console.log(`ğŸ“Š [Performance] Annotation ${annotationId} rendered in ${renderTime}ms`);
  }
  
  static measureMemoryUsage() {
    const memory = (performance as any).memory;
    console.log(`ğŸ“Š [Memory] Used: ${memory.usedJSHeapSize / 1024 / 1024}MB`);
  }
}
```

### **2. ë””ë²„ê¹… ë„êµ¬**

```typescript
// ê°œë°œì ë„êµ¬
class DevTools {
  static logAnnotationState(store: AnnotationStore) {
    console.log('ğŸ” [DevTools] Annotation State:', {
      count: store.annotations.length,
      selected: store.selection.selectedAnnotationIds,
      hovered: store.hoveredAnnotationId
    });
  }
  
  static logEventFlow(event: string, data: any) {
    console.log(`ğŸ” [EventFlow] ${event}:`, data);
  }
}
```

---

## ğŸ¯ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### **1. ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜**

```typescript
// 1ë‹¨ê³„: ê¸°ì¡´ ì½”ë“œ ìœ ì§€í•˜ë©´ì„œ ìƒˆ êµ¬ì¡° ì¶”ê°€
// 2ë‹¨ê³„: ì ì§„ì ìœ¼ë¡œ ê¸°ì¡´ ì½”ë“œë¥¼ ìƒˆ êµ¬ì¡°ë¡œ ì´ë™
// 3ë‹¨ê³„: ê¸°ì¡´ ì½”ë“œ ì œê±° ë° ìµœì í™”
```

### **2. í˜¸í™˜ì„± ìœ ì§€**

```typescript
// ê¸°ì¡´ API í˜¸í™˜ì„± ìœ ì§€
class LegacyAnnotationLayer {
  // ê¸°ì¡´ AnnotationLayerV2ì˜ APIë¥¼ ë˜í•‘
  render() {
    return <AnnotationManager {...this.props} />;
  }
}
```

### **3. ë¡¤ë°± ê³„íš**

```typescript
// ê¸°ëŠ¥ í”Œë˜ê·¸ë¥¼ í†µí•œ ë¡¤ë°±
const useNewAnnotationSystem = process.env.REACT_APP_USE_NEW_ANNOTATIONS === 'true';

const AnnotationLayer = useNewAnnotationSystem 
  ? AnnotationManager 
  : AnnotationLayerV2;
```

---

## ğŸ“ˆ ì„±ê³µ ì§€í‘œ

### **1. ì½”ë“œ í’ˆì§ˆ**
- íŒŒì¼ í¬ê¸°: í‰ê·  200ì¤„ ì´í•˜
- ë³µì¡ë„: 80% ê°ì†Œ
- í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€: 90% ì´ìƒ

### **2. ê°œë°œ ìƒì‚°ì„±**
- ìƒˆ ê¸°ëŠ¥ ì¶”ê°€: 70% ë¹ ë¥¸ ê°œë°œ
- ë²„ê·¸ ìˆ˜ì •: 80% ë¹ ë¥¸ ë””ë²„ê¹…
- ì½”ë“œ ì¬ì‚¬ìš©: 90% í–¥ìƒ

### **3. ì‚¬ìš©ì ê²½í—˜**
- ë¡œë”© ì‹œê°„: 50% ë‹¨ì¶•
- ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: 30% ê°ì†Œ
- ë Œë”ë§ ì„±ëŠ¥: 40% í–¥ìƒ

---

**ì´ ì•„í‚¤í…ì²˜ ì„¤ê³„ëŠ” í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.**

